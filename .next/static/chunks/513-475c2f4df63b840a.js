"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[513],{1788:(e,t,r)=>{r.d(t,{r:()=>g});var o=r(7876),n=r(252),l=r(7989),i=r(7634),a=r(747),d=r(1874),c=r(4232),s=r(9884),h=r(9241),x=r(9573);let u={light:"",dark:".dark"},p=c.createContext(null);function f(e){let{id:t,className:r,children:l,config:i,...a}=e,d=c.useId(),s="chart-".concat(t||d.replace(/:/g,""));return(0,o.jsx)(p.Provider,{value:{config:i},children:(0,o.jsxs)("div",{"data-slot":"chart","data-chart":s,className:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,x.QP)((0,h.$)(t))}("[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",r),...a,children:[(0,o.jsx)(b,{id:s,config:i}),(0,o.jsx)(n.u,{children:l})]})})}let b=e=>{let{id:t,config:r}=e,n=Object.entries(r).filter(e=>{let[,t]=e;return t.theme||t.color});return n.length?(0,o.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(u).map(e=>{let[r,o]=e;return"\n".concat(o," [data-chart=").concat(t,"] {\n").concat(n.map(e=>{var t;let[o,n]=e,l=(null===(t=n.theme)||void 0===t?void 0:t[r])||n.color;return l?"  --color-".concat(o,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};d.m,s.s;function g(e){let{data:t,config:r}=e;return(0,o.jsx)(f,{config:r,className:"min-h-[250px] w-full",children:(0,o.jsx)(n.u,{width:"100%",height:"100%",children:(0,o.jsxs)(l.r,{children:[(0,o.jsx)(i.F,{data:t,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:e=>e.name,children:t.map((e,t)=>{var n;let l=(null===(n=r[e.name])||void 0===n?void 0:n.color)||"#8884d8";return(0,o.jsx)(a.f,{fill:l},"cell-".concat(t))})}),(0,o.jsx)(d.m,{formatter:e=>["".concat(e," commits"),"Commits"]})]})})})}},5513:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var o=r(7876),n=r(4232),l=r(1788);let i=()=>{let[e,t]=(0,n.useState)("all"),[r,i]=(0,n.useState)(null),[a,d]=(0,n.useState)({}),[c,s]=(0,n.useState)([]),[h,x]=(0,n.useState)({}),[u,p]=(0,n.useState)(null),[f,b]=(0,n.useState)(!0),[g,m]=(0,n.useState)(null),[y,v]=(0,n.useState)("chart");console.log(r);let j=(e,t)=>{if("all"===t)return Object.entries(e).map(e=>{let[t,r]=e;return{name:t,value:r}});let r="weekly"===t?.1:"monthly"===t?.3:1;return Object.entries(e).map(e=>{let[t,o]=e;return{name:t,value:Math.round(o*r)}})},w=e=>{try{let t=new URL(e);if(!t.hostname.includes("gitlab"))return null;let r=t.pathname.split("/").filter(Boolean);if(r.length>=2){let e=t.pathname,o=e.indexOf("/-/");if(-1===o)return r[r.length-1];{let t=e.substring(1,o).split("/");return t[t.length-1]}}return null}catch(e){return console.error("Error parsing URL:",e),null}},k=(0,n.useCallback)(async()=>{if(!u){m("No GitLab project detected"),b(!1);return}try{b(!0);let e=await fetch("https://extension-backend-production-1c13.up.railway.app/commits?projectName=".concat(encodeURIComponent(u)));if(!e.ok)throw Error("Server responded with status: ".concat(e.status));let t=await e.json();i(t.total_commits),d(t.author_commit_count),m(null)}catch(e){console.error("Error fetching commit data:",e),m("Failed to fetch data: ".concat(e))}finally{b(!1)}},[u]);return(0,n.useEffect)(()=>{if(Object.keys(a).length>0){let t=j(a,e);t.sort((e,t)=>t.value-e.value);let r=["#2563eb","#60a5fa","#93c5fd","#3b82f6","#1d4ed8","#1e40af","#818cf8","#4f46e5"],o={};t.forEach((e,t)=>{o[e.name]={label:e.name,color:r[t%r.length]}}),s(t),x(o)}},[a,e]),(0,n.useEffect)(()=>{"undefined"!=typeof chrome&&chrome.tabs?chrome.tabs.query({active:!0,currentWindow:!0},e=>{var t;let r=null===(t=e[0])||void 0===t?void 0:t.url;r&&r.includes("gitlab.com")?p(w(r)):(m("Not a GitLab page"),b(!1))}):p("demo-project")},[]),(0,n.useEffect)(()=>{u&&k()},[u,k]),(0,o.jsxs)("div",{style:{width:"280px",height:"450px",padding:"8px",fontFamily:"Arial",fontSize:"12px",backgroundColor:"#f8fafc",color:"#1e293b",overflow:"auto"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px",borderBottom:"2px solid #3b82f6",paddingBottom:"6px",position:"sticky",top:0,backgroundColor:"#f8fafc",zIndex:10},children:[(0,o.jsx)("h1",{style:{fontSize:"15px",fontWeight:"bold",margin:0,color:"#1e40af"},children:"GitLab Stats"}),u&&(0,o.jsx)("span",{style:{color:"#475569",fontSize:"11px",maxWidth:"140px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:"500"},children:u})]}),f?(0,o.jsx)("div",{style:{padding:"20px",textAlign:"center"},children:(0,o.jsx)("div",{style:{color:"#3b82f6",fontWeight:"bold"},children:"Loading commit data..."})}):g?(0,o.jsxs)("div",{style:{padding:"15px",color:"#b91c1c",textAlign:"center",backgroundColor:"#fee2e2",borderRadius:"6px"},children:[(0,o.jsx)("p",{style:{fontSize:"13px",fontWeight:"500",margin:"0 0 8px 0"},children:g}),(0,o.jsx)("button",{onClick:k,style:{padding:"5px 10px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"Retry"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",backgroundColor:"#dbeafe",padding:"6px",borderRadius:"4px",marginBottom:"8px"},children:[(0,o.jsxs)("div",{style:{textAlign:"center",flex:1},children:[(0,o.jsx)("div",{style:{fontSize:"10px",color:"#1e40af"},children:"Commits"}),(0,o.jsx)("div",{style:{fontWeight:"bold",fontSize:"14px"},children:r?"all"===e?r:"weekly"===e?Math.round(.1*r):"monthly"===e?Math.round(.3*r):r:"Loading..."})]}),(0,o.jsxs)("div",{style:{textAlign:"center",flex:1},children:[(0,o.jsx)("div",{style:{fontSize:"10px",color:"#1e40af"},children:"Contributors"}),(0,o.jsx)("div",{style:{fontWeight:"bold",fontSize:"14px"},children:c.length})]})]}),(0,o.jsxs)("div",{style:{display:"flex",marginBottom:"8px",backgroundColor:"white",borderRadius:"4px",overflow:"hidden"},children:[(0,o.jsx)("button",{onClick:()=>v("chart"),style:{flex:1,padding:"6px 4px",backgroundColor:"chart"===y?"#3b82f6":"white",color:"chart"===y?"white":"#64748b",border:"none",cursor:"pointer",fontSize:"12px",fontWeight:"bold",borderRight:"1px solid #e2e8f0"},children:"Chart"}),(0,o.jsx)("button",{onClick:()=>v("contributors"),style:{flex:1,padding:"6px 4px",backgroundColor:"contributors"===y?"#3b82f6":"white",color:"contributors"===y?"white":"#64748b",border:"none",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"Contributors"})]}),(0,o.jsx)("div",{style:{display:"flex",marginBottom:"8px",backgroundColor:"white",borderRadius:"4px",padding:"2px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:["all","yearly","monthly","weekly"].map(r=>(0,o.jsx)("button",{onClick:()=>t(r),style:{flex:1,padding:"4px 2px",backgroundColor:e===r?"#4f46e5":"transparent",color:e===r?"white":"#64748b",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"10px",fontWeight:e===r?"bold":"normal"},children:r.charAt(0).toUpperCase()+r.slice(1)},r))}),"chart"===y?(0,o.jsx)("div",{style:{backgroundColor:"white",borderRadius:"6px",padding:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:(0,o.jsx)("div",{style:{height:"280px"},children:(0,o.jsx)(l.r,{data:c,config:h})})}):(0,o.jsx)("div",{style:{backgroundColor:"white",borderRadius:"6px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflow:"hidden"},children:(0,o.jsx)("div",{style:{maxHeight:"280px",overflowY:"auto",padding:"0"},children:c.map((e,t)=>{var r,n;return(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"6px 8px",borderBottom:"1px solid #f1f5f9",backgroundColor:t<3?0===t?"#f0f9ff":"#f8fafc":"white"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"75%"},children:[t<3&&(0,o.jsx)("div",{style:{minWidth:"16px",height:"16px",borderRadius:"50%",marginRight:"6px",backgroundColor:(null===(r=h[e.name])||void 0===r?void 0:r.color)||"#ccc",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"9px"},children:t+1}),t>=3&&(0,o.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",minWidth:"8px",marginRight:"6px",backgroundColor:(null===(n=h[e.name])||void 0===n?void 0:n.color)||"#ccc"}}),(0,o.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:t<3?"500":"normal",fontSize:"11px"},children:e.name})]}),(0,o.jsx)("div",{style:{fontWeight:t<3?"bold":"500",color:0===t?"#1e40af":"#334155",fontSize:"11px"},children:e.value})]},e.name)})})})]})]})}}}]);