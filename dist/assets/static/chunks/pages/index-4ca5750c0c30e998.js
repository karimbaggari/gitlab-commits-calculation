(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{360:(e,t,r)=>{"use strict";r.d(t,{r:()=>g});var o=r(7876),n=r(252),l=r(7989),i=r(7634),a=r(747),c=r(1874),s=r(4232),d=r(9884),h=r(9241),u=r(9573);let p={light:"",dark:".dark"},x=s.createContext(null);function f(e){let{id:t,className:r,children:l,config:i,...a}=e,c=s.useId(),d="chart-".concat(t||c.replace(/:/g,""));return(0,o.jsx)(x.Provider,{value:{config:i},children:(0,o.jsxs)("div",{"data-slot":"chart","data-chart":d,className:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,u.QP)((0,h.$)(t))}("[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",r),...a,children:[(0,o.jsx)(b,{id:d,config:i}),(0,o.jsx)(n.u,{children:l})]})})}let b=e=>{let{id:t,config:r}=e,n=Object.entries(r).filter(e=>{let[,t]=e;return t.theme||t.color});return n.length?(0,o.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(p).map(e=>{let[r,o]=e;return"\n".concat(o," [data-chart=").concat(t,"] {\n").concat(n.map(e=>{var t;let[o,n]=e,l=(null===(t=n.theme)||void 0===t?void 0:t[r])||n.color;return l?"  --color-".concat(o,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};c.m,d.s;function g(e){let{data:t,config:r,activeTab:s="all"}=e,d="weekly"===s?20:50,h=t.filter(e=>e.value>=d);return 0===h.length?(0,o.jsxs)("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",color:"#64748b",fontSize:"14px"},children:["No contributors with ",d,"+ commits"]}):(0,o.jsx)(f,{config:r,className:"min-h-[250px] w-full",children:(0,o.jsx)(n.u,{width:"100%",height:"100%",children:(0,o.jsxs)(l.r,{children:[(0,o.jsx)(i.F,{data:h,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:e=>e.name,children:h.map((e,t)=>{var n;let l=(null===(n=r[e.name])||void 0===n?void 0:n.color)||"#8884d8";return(0,o.jsx)(a.f,{fill:l},"cell-".concat(t))})}),(0,o.jsx)(c.m,{formatter:e=>["".concat(e," commits"),"Commits"]})]})})})}},1983:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var o=r(7876),n=r(4232),l=r(360);let i=e=>{try{let t=new URL(e);if(!t.hostname.includes("gitlab"))return null;let r=t.pathname.split("/").filter(Boolean);if(r.length>=2){let e=t.pathname,o=e.indexOf("/-/");if(-1===o)return r[r.length-1];{let t=e.substring(1,o).split("/");return t[t.length-1]}}return null}catch(e){return console.error("Error parsing URL:",e),null}},a=()=>{let[e,t]=(0,n.useState)("all"),[r,a]=(0,n.useState)(null),[c,s]=(0,n.useState)({}),[d,h]=(0,n.useState)([]),[u,p]=(0,n.useState)({}),[x,f]=(0,n.useState)(null),[b,g]=(0,n.useState)(!0),[m,y]=(0,n.useState)(null),[v,j]=(0,n.useState)("chart"),w=(0,n.useCallback)(async()=>{if(!x){y("No GitLab project detected"),g(!1);return}try{g(!0);let e=await fetch("https://extension-backend-production-1c13.up.railway.app/commits?projectName=".concat(encodeURIComponent(x)));if(!e.ok)throw Error("Server responded with status: ".concat(e.status));let t=await e.json();console.log("API response:",t),a(t.total_commits),s(t.author_commit_count||{}),y(null)}catch(e){console.error("Error fetching commit data:",e),y("Failed to fetch data: ".concat(e))}finally{g(!1)}},[x]);return(0,n.useEffect)(()=>{if(Object.keys(c).length>0){let t;(t="all"===e||"yearly"===e?Object.entries(c).map(e=>{let[t,r]=e;return{name:t,value:r}}):"monthly"===e?Object.entries(c).map(e=>{let[t,r]=e;return{name:t,value:Math.round(.3*r)}}):Object.entries(c).map(e=>{let[t,r]=e;return{name:t,value:Math.round(.1*r)}})).sort((e,t)=>t.value-e.value);let r=["#2563eb","#60a5fa","#93c5fd","#3b82f6","#1d4ed8","#1e40af","#818cf8","#4f46e5"],o={};t.forEach((e,t)=>{o[e.name]={label:e.name,color:r[t%r.length]}}),h(t),p(o)}},[c,e]),(0,n.useEffect)(()=>{"undefined"!=typeof chrome&&chrome.tabs?chrome.tabs.query({active:!0,currentWindow:!0},e=>{var t;let r=null===(t=e[0])||void 0===t?void 0:t.url;r&&r.includes("gitlab.com")?f(i(r)):(y("Not a GitLab page"),g(!1))}):f("demo-project")},[]),(0,n.useEffect)(()=>{x&&w()},[x,w]),(0,o.jsxs)("div",{style:{width:"100%",maxHeight:"500px",padding:"10px",fontFamily:"Arial",fontSize:"13px",backgroundColor:"#f8fafc",color:"#1e293b",overflow:"auto"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px",borderBottom:"2px solid #3b82f6",paddingBottom:"6px",position:"sticky",top:0,backgroundColor:"#f8fafc",zIndex:10},children:[(0,o.jsx)("h1",{style:{fontSize:"16px",fontWeight:"bold",margin:0,color:"#1e40af"},children:"GitLab Stats"}),x&&(0,o.jsx)("span",{style:{color:"#475569",fontSize:"12px",maxWidth:"140px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:"500"},children:x})]}),b?(0,o.jsx)("div",{style:{padding:"20px",textAlign:"center"},children:(0,o.jsx)("div",{style:{color:"#3b82f6",fontWeight:"bold"},children:"Loading commit data..."})}):m?(0,o.jsxs)("div",{style:{padding:"15px",color:"#b91c1c",textAlign:"center",backgroundColor:"#fee2e2",borderRadius:"6px"},children:[(0,o.jsx)("p",{style:{fontSize:"13px",fontWeight:"500",margin:"0 0 8px 0"},children:m}),(0,o.jsx)("button",{onClick:w,style:{padding:"5px 10px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"Retry"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{display:"flex",marginBottom:"8px",backgroundColor:"white",borderRadius:"4px",overflow:"hidden"},children:[(0,o.jsx)("button",{onClick:()=>j("chart"),style:{flex:1,padding:"6px 4px",backgroundColor:"chart"===v?"#3b82f6":"white",color:"chart"===v?"white":"#64748b",border:"none",cursor:"pointer",fontSize:"12px",fontWeight:"bold",borderRight:"1px solid #e2e8f0"},children:"Chart"}),(0,o.jsx)("button",{onClick:()=>j("contributors"),style:{flex:1,padding:"6px 4px",backgroundColor:"contributors"===v?"#3b82f6":"white",color:"contributors"===v?"white":"#64748b",border:"none",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"Contributors"})]}),(0,o.jsx)("div",{style:{display:"flex",marginBottom:"8px",backgroundColor:"white",borderRadius:"4px",padding:"2px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:["all","yearly","monthly","weekly"].map(r=>(0,o.jsx)("button",{onClick:()=>t(r),style:{flex:1,padding:"4px 2px",backgroundColor:e===r?"#4f46e5":"transparent",color:e===r?"white":"#64748b",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"10px",fontWeight:e===r?"bold":"normal"},children:r.charAt(0).toUpperCase()+r.slice(1)},r))}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",backgroundColor:"#dbeafe",padding:"8px",borderRadius:"4px",marginBottom:"10px"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"11px",color:"#1e40af"},children:"Total Commits"}),(0,o.jsx)("div",{style:{fontWeight:"bold",fontSize:"16px"},children:null===r?"Loading...":"all"===e||"yearly"===e?r:"monthly"===e?Math.round(.3*r):Math.round(.1*r)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"11px",color:"#1e40af"},children:"Contributors"}),(0,o.jsx)("div",{style:{fontWeight:"bold",fontSize:"16px"},children:d.length})]})]}),"chart"===v?(0,o.jsx)("div",{style:{backgroundColor:"white",borderRadius:"6px",padding:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:(0,o.jsx)("div",{style:{height:"280px"},children:(0,o.jsx)(l.r,{data:d,config:u,activeTab:e})})}):(0,o.jsx)("div",{style:{backgroundColor:"white",borderRadius:"6px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflow:"hidden"},children:(0,o.jsx)("div",{style:{maxHeight:"280px",overflowY:"auto",padding:"0"},children:d.map((e,t)=>{var r,n;return(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"6px 8px",borderBottom:"1px solid #f1f5f9",backgroundColor:t<3?0===t?"#f0f9ff":"#f8fafc":"white"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"65%"},children:[t<3&&(0,o.jsx)("div",{style:{minWidth:"16px",height:"16px",borderRadius:"50%",marginRight:"6px",backgroundColor:(null===(r=u[e.name])||void 0===r?void 0:r.color)||"#ccc",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"9px"},children:t+1}),t>=3&&(0,o.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",minWidth:"8px",marginRight:"6px",backgroundColor:(null===(n=u[e.name])||void 0===n?void 0:n.color)||"#ccc"}}),(0,o.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:t<3?"500":"normal",fontSize:"11px"},children:e.name})]}),(0,o.jsx)("div",{style:{fontWeight:t<3?"bold":"500",color:0===t?"#1e40af":"#334155",fontSize:"11px",width:"35%",textAlign:"right"},children:e.value})]},e.name)})})})]})]})};function c(){return(0,o.jsx)(a,{})}},6760:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(1983)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[174,636,593,792],()=>t(6760)),_N_E=e.O()}]);